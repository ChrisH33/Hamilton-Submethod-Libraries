// {{{ 2 "IncludeGuard" "PragmaOnce"
#pragma once
// }} ""
#include "HSLFilLib.hsl"
#include "HSLStrLib.hsl"
#include "HSLFileDirectoryLib.hsl"
#include "HSLTrcLib.hsl"
/* {{ 2 "LibraryInsertLine" "" */ // }} ""
// {{ 2 "TemplateIncludeBlock" ""
#include "HSLMETEDLib.hs_"
#include "HSLMECCLib.hs_"
// }} ""
// {{{ 2 "LibraryNamespace" "Begin"
namespace GITHUB_CHECKS {
// }} ""
/* {{ 2 "VariableInsertLine" "" */ // }} ""
// {{{ 2 "SubmethodForwardDeclaration" ""
function GitFetch( variable i_strGitRepo, variable i_strCurrentDir, variable i_strGitPath ) void ;
// }} ""
function _InitLibrary() {
// {{ 2 "AutoInitBlock" ""
// }} ""
}
function _ExitLibrary() {
// {{ 2 "AutoExitBlock" ""
// }} ""
}
// {{{ 5 "GitFetch" "Begin"
function GitFetch( variable i_strGitRepo, variable i_strCurrentDir, variable i_strGitPath ) void {
// }} ""
private variable _strText;
private variable _strConfigPath;
private file _hndConfig;
private variable _strBatPath;
private variable _rtnGitState;
private variable _strTempBatPath;
private variable _strMethodDir;
private variable _strTempSchemaPath;
private variable _rtn;
private variable _strPath;
private variable _strName;
private variable _strGitRepoCheck;
// {{ 5 "GitFetch" "InitLocals"
// }} ""
// {{ 1 1 0 "9abeaa62_6d5e_415b_9f590786667cb936" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 2 1 0 "c6461a3a_9f5b_4a68_800d16de5a604248" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 3 1 0 "8050592d_8331_4f9f_841656e61ab00c37" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 4 1 0 "fc76973f_e50b_439f_99eab92530ce1975" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 5 1 0 "b8b7e005_5b91_4a1f_ba91b8c41abb3563" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
_strGitRepoCheck = i_strGitRepo + Translate("\\.git");
// }} ""
// {{{ 6 1 0 "24bcd0f8_e135_4c90_835b7fd13657be05" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
_rtn = FileDirectoryLib::CheckIfDirectoryExists(_strGitRepoCheck);
// }} ""
// {{ 7 1 0 "d48fda70_3586_408c_856b6477b104c8c7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (_rtn == 0)
{
// }} ""
// {{ 8 1 0 "e3307797_3ca3_4145_b3cdcdadb01b33c4" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 9 1 0 "47ca3f35_9f95_4cf4_b693458fad753b0d" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## Cannot run GitHub_Checks; incorrect git repo provided: "), i_strGitRepo);
// }} ""
// {{{ 10 1 0 "2d386533_6472_4f8e_a4317baa8b497045" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## Will exit github check"), Translate(""));
// }} ""
// {{{ 11 1 0 "5a5b8581_7122_438f_bfd0a59ec2ef4c3c" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return;
// }} ""
// {{ 12 1 0 "d48fda70_3586_408c_856b6477b104c8c7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 13 1 0 "22420ee8_f568_4026_8f37f036bedecad9" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 14 1 0 "b38289d7_e9ae_4ba2_ad7a687856e056a1" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_strCurrentDir == "")
{
// }} ""
// {{ 15 1 0 "0bd7fc6a_fc78_40e4_bb93220cf990f455" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
i_strCurrentDir = Translate("C:\\Program Files (x86)\\HAMILTON\\Library\\WSI\\GitHub Versioning\\");
// }} ""
// {{ 16 1 0 "b38289d7_e9ae_4ba2_ad7a687856e056a1" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 17 1 0 "977c5d3a_b84d_4f24_9fc8a39cfaa360a8" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
_strBatPath = i_strCurrentDir + Translate("\\git-check.bat");
// }} ""
// {{{ 18 1 0 "0e246bc9_587b_4075_9bee3fe192920c7a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
_rtn = FileDirectoryLib::CheckIfFileExists(_strBatPath);
// }} ""
// {{ 19 1 0 "1d8de390_0b69_49b3_b81a9114b25ad30b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (_rtn == 0)
{
// }} ""
// {{ 20 1 0 "4c2e2d03_a49c_4857_93f079d4756e4b15" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 21 1 0 "06bb61d1_3d46_4fc9_8104ad9ceba43e30" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## Cannot run GitHub_Checks; incorrect directory provided"), Translate(""));
// }} ""
// {{{ 22 1 0 "9b487d93_9a48_45df_8bdd3bc10ab89914" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## Provided dir: "), i_strCurrentDir);
// }} ""
// {{{ 23 1 0 "0729b6ee_61af_41de_947ed206fbe02bf2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## Method will abort"), Translate(""));
// }} ""
// {{ 24 1 0 "5e3f3259_fede_4110_a1cea7173ad79569" "{930D6C31-8EFB-11d4-A3BA-002035848439}"
abort;
// }} ""
// {{ 25 1 0 "1d8de390_0b69_49b3_b81a9114b25ad30b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 26 1 0 "5499055e_0858_4426_9fbd81def4288365" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 27 1 0 "03aede38_ab45_45bc_a59ebdf892aa5377" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
_rtn = FileDirectoryLib::CheckIfFileExists(i_strGitPath);
// }} ""
// {{ 28 1 0 "bede8b11_304f_41b1_9c8d369afa7ce170" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (_rtn == 0)
{
// }} ""
// {{ 29 1 0 "66c23620_2deb_4654_aae083793648da9c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 30 1 0 "4e5f1176_ef37_4661_8357ce889a53a6a2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## Cannot run GitHub_Checks; incorrect git path provided"), Translate(""));
// }} ""
// {{{ 31 1 0 "bf2bd1f7_c8bd_46cc_9220ec28ab9bb797" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## Provided path: "), i_strGitPath);
// }} ""
// {{{ 32 1 0 "4d89461f_7d67_45a0_9db6c8c41b64c9d5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## Method will abort"), Translate(""));
// }} ""
// {{ 33 1 0 "ab2bb839_4f12_40fe_af7bedfd053a7cf7" "{930D6C31-8EFB-11d4-A3BA-002035848439}"
abort;
// }} ""
// {{ 34 1 0 "bede8b11_304f_41b1_9c8d369afa7ce170" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 35 1 0 "8050592d_8331_4f9f_841656e61ab00c37" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 36 1 0 "2677ea98_b181_4ed7_881af4d023d40906" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 37 1 0 "8f74c04e_9ac0_4a52_a72d241339250de5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 38 1 0 "104d1d4a_abc5_4207_ad40a6e7d6bea8f2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
_strConfigPath = StrConcat2(i_strCurrentDir, Translate("config.txt"));
// }} ""
// {{ 39 1 0 "ed7cdf5f_7ac3_489b_a8cde530fd5bcdf0" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
_hndConfig.AddField(1, _strText, hslString);
_hndConfig.SetDelimiter(hslAsciiText);
if( 0 == _hndConfig.Open(_strConfigPath, hslWrite) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, _strConfigPath, "HxMetEdCompCmd");
}
// }} ""
// {{ 40 1 0 "9f13beec_18d5_4e8a_b5484933bc61bc73" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 41 1 0 "eddfa5d4_10ee_4bf8_9f5b4da3911f3880" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 42 1 0 "c6deb481_9983_4a46_9b7d623898224044" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
_strText = StrConcat4(Translate("GIT="), i_strGitPath, Translate("\n"), Translate(""));
// }} ""
// {{ 43 1 0 "6063e875_7fb6_45fe_bf9adc0b7f4ec080" "{B31F3537-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == _hndConfig.WriteRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1473380096, MECC::IDS::stepNameFileWrite, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 44 1 0 "04927f50_945d_4a0f_bfc8310d837ad007" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 45 1 0 "6dd80f4a_f0f6_4e6d_a7d6b4af07386053" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
_strText = StrConcat2(Translate("REPO="), i_strGitRepo);
// }} ""
// {{ 46 1 0 "65831c72_cddd_43bf_b4e3567e85556f31" "{B31F3537-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == _hndConfig.WriteRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1473380096, MECC::IDS::stepNameFileWrite, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 47 1 0 "9f13beec_18d5_4e8a_b5484933bc61bc73" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 48 1 0 "6ba88c59_0e16_4d36_bc1a810836ba82ba" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != _hndConfig.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
_hndConfig.RemoveFields();
// }} ""
// {{ 49 1 0 "8f74c04e_9ac0_4a52_a72d241339250de5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 50 1 0 "ccbf571d_125c_4172_92b00b261d060e01" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 51 1 0 "5c65e7ed_cff6_45e4_8ee6fb9c5f7862c3" "{B31F3545-5D80-11d4-A5EB-0050DA737D89}"
{
event localDummyEvent1;
if( 0 == Shell(_strBatPath, hslHide, hslSynchronous, localDummyEvent1, _rtnGitState) )
{
    MECC::RaiseRuntimeErrorEx(-1238499072, MECC::IDS::stepNameShell, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
}
// }} ""
// {{ 52 1 0 "b5bf3b7d_ec96_40dc_87592c14171e5a76" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 53 1 0 "67e89b4b_71b4_42eb_b0562bffed4c49d3" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 54 1 0 "76cd15f4_e3b9_4814_926d44229db32b96" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
_rtn = FileDirectoryLib::DeleteFile(_strConfigPath);
// }} ""
// {{ 55 1 0 "547f6aaf_c5a2_4d26_863158eff4f71a42" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (_rtn == 1)
{
// }} ""
// {{ 56 1 0 "e2c53279_82b6_495b_b45b4dd981c706ca" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 57 1 0 "8eda9396_e124_4026_b2350fb01a3fdbe7" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## There was an error removing the git-check file, located here: "), _strConfigPath);
// }} ""
// {{{ 58 1 0 "a0fc34d3_f3ff_4d84_bd975f1a2f249d99" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## The method will now abort"), Translate(""));
// }} ""
// {{ 59 1 0 "d1676bae_5faf_4dd2_8c23daa388c6a7c8" "{930D6C31-8EFB-11d4-A3BA-002035848439}"
abort;
// }} ""
// {{ 60 1 0 "547f6aaf_c5a2_4d26_863158eff4f71a42" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 61 1 0 "67e89b4b_71b4_42eb_b0562bffed4c49d3" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 62 1 0 "fe1b1efb_48cc_4fc9_afe4b83b85c6593c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 63 1 0 "caf76ab7_13fa_419a_9233a26975b52ce5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (_rtnGitState == 2)
{
// }} ""
// {{ 64 1 0 "d2f82440_f2d4_4a15_a99a21280970ff69" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 65 1 0 "62e3ee59_be91_4557_8c5990e7d905eec8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/"), Translate(""));
// }} ""
// {{{ 66 1 0 "b4df26a2_2f20_4823_820ef04a17306ac5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## This repository is not up-to-date: "), i_strGitRepo);
// }} ""
// {{{ 67 1 0 "d2f12307_91f5_4123_9195aefeb4dc81f6" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## The method will now abort. Please update and try again"), Translate(""));
// }} ""
// {{ 68 1 0 "ad5dc074_30a2_4227_b77b339742b7d0ce" "{930D6C31-8EFB-11d4-A3BA-002035848439}"
abort;
// }} ""
// {{ 69 1 0 "caf76ab7_13fa_419a_9233a26975b52ce5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 70 1 0 "34e7d147_9723_43ac_9f4ec201259ffae6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (_rtnGitState == 0)
{
// }} ""
// {{ 71 1 0 "fe0def77_0948_4fcd_a4160af9a500bfb1" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 72 1 0 "34e7d147_9723_43ac_9f4ec201259ffae6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 73 1 0 "dde5ede4_b7ae_449e_ab893fbcce7cc70c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (_rtnGitState == 1)
{
// }} ""
// {{ 74 1 0 "ca556533_d52e_4ab3_93e41d94b46951b3" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 75 1 0 "3dc56df5_4bee_4b96_9e82d978d819155b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace(Translate("## This repository is ahead: "), i_strGitRepo);
// }} ""
// {{ 76 1 0 "dde5ede4_b7ae_449e_ab893fbcce7cc70c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 77 1 0 "34e7d147_9723_43ac_9f4ec201259ffae6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 78 1 0 "caf76ab7_13fa_419a_9233a26975b52ce5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "GitFetch" "End"
}
// }} ""
/* {{ 2 "SubmethodInsertLine" "" */ // }} ""
// {{{ 2 "LibraryNamespace" "End"
} // library namespace
// }} ""
// $$author=ch33$$valid=0$$time=2026-02-17 08:59$$checksum=ee1abbe4$$length=083$$